<div class="container-page">
    <form [formGroup]="searchForm"> 
        <div class="flex justify-center py-3 relative">
            <input formControlName="searchQuery" class="rounded-[25px] w-[80%] lg:w-[50%] px-8 py-3 pr-12" placeholder="Research" />
            <img src="assets/icons/loupe.png" class="-ml-16 h-9 my-2 cursor-pointer" (click)="fetchCustomers()" />
        </div>
    </form>      
    <div>
        <h2 class="text-center text-white bg-custom font-semibold text-xl py-2 rounded-t-[10px]">Research result</h2>
        <div class="bg-white grid lg:grid-cols-10">
            <div class="lg:col-span-7 mx-3 my-2 border border-solid border-black rounded-[10px]">
                <h2 class="text-center text-white bg-custom font-semibold text-xl py-2 rounded-t-[10px]">Existing customers</h2>
                <div class="m-2 rounded-b-[10px] ">
                    <div class="bg-[#EEE] h-[285px] p-4">
                        <div class="grid grid-cols-2 lg:grid-cols-4 h-[210px] overflow-y-scroll custom-scrollbar">
                            <div *ngIf="isLoading; else customersList"  class="flex items-center justify-center h-full bg-white">
                                <svg class="animate-spin h-5 w-5 mr-3 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.878 3.2 8.062l2.83-2.83zM12 20c-3.042 0-5.878-1.135-8.062-3.2l-2.83 2.83A7.962 7.962 0 0012 24h.001c4.418 0 8-3.582 8-8V12h-4v8z"></path>
                                </svg>
                                <p class="text-gray-600">Loading customers...</p>
                            </div>
                            
                            <ng-template #customersList>
                                <button *ngFor="let customer of customers"  routerLink="/customer/{{customer.customer_uuid}}" class="border mx-2 mb-4 bg-custom border-solid border-black rounded-t-[10px]">
                                    <h1 class="border-b border-solid border-black text-center bg-white rounded-t-[10px] py-1 font-bold">{{ customer.customer_name }}</h1>
                                    <h2 class="text-white border-b border-solid border-black text-center bg-custom py-1">Ships</h2>
                                    <h2 class="text-center text-white bg-custom py-1">Fleets</h2>
                                </button>
                            </ng-template>
                        </div>
                        <div class="flex justify-center py-2 ">
                            <button routerLink="/config/customers" [disabled]="isSalesSupportDisabled()" class="bg-custom flex justify-center border border-solid border-black rounded-[10px] py-2 text-white font-bold px-24">
                                <img src="assets/icons/update.png" class="w-6 h-6 mr-4" />
                                Edit
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="lg:col-span-3 flex flex-col py-10 px-10">
                <button routerLink="/" class="text-2xl mb-6 py-10 px-6 flex justify-center bg-[#CCCCCC] border border-solid border-black text-white font-bold rounded-[10px]">
                    <img src="assets/icons/create-ticket.png" class="mr-4" />
                    {{ 'createTicket' | translate }}
                </button>
                <button routerLink="/document" class="text-2xl py-10 px-6 flex justify-center bg-[#CCCCCC] border border-solid border-black text-white font-bold rounded-[10px]">
                    <img src="assets/icons/document.png" class="mr-4" />
                    See related documents
                </button>
            </div>
        </div>
    </div>
</div>
